

![框架](${currentFileDir}/20231020093658.png)

https://blog.csdn.net/m0_46044243/article/details/126724965?ops_request_misc=&request_id=&biz_id=102&utm_term=Qt%20libevent&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-8-126724965.142^v96^pc_search_result_base5&spm=1018.2226.3001.4187

## 服务器

进程池中主进程和子进程用管道通信
在线程池中也可以用管道进行主线程与子线程通信
base事件监听管道的读端，主线程在管道写端写入数据

每一个线程都有一个base，fd放在base里，就知道用哪个线程通信


客户端 从线程池中选择一个线程去处理客户端的请求
虚函数 去具体处理客户端的逻辑


spdlog日志


## 客户端
网络上的消息传递都是通过json的文本形式接收
![](${currentFileDir}/20231021122048.png)

![](${currentFileDir}/20231021210243.png)

Json
![](${currentFileDir}/20231023094425.png)


map存放在线用户列表

删除多余进程：
![](${currentFileDir}/20231023170038.png)


![](${currentFileDir}/20231023200935.png)